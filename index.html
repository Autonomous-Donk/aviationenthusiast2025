<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>高级飞机数据库 | 2025年最新版</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- 添加 Turnstile JavaScript -->
  <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
  <style>
    :root {
      --primary: #1a365d;
      --primary-dark: #0f2544;
      --primary-light: #2d4a7c;
      --accent: #d4af37;
      --accent-light: #e6c75c;
      --success: #10b981;
      --info: #3b82f6;
      --warning: #f59e0b;
      --text: #2d3748;
      --text-light: #718096;
      --bg: #f7fafc;
      --card-bg: #ffffff;
      --border: #e2e8f0;
      --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-hover: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
      --radius: 12px;
      --radius-lg: 16px;
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      --transition-slow: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    [data-theme="dark"] {
      --primary: #1a202c;
      --primary-dark: #0d1117;
      --primary-light: #2d3748;
      --accent: #d4af37;
      --accent-light: #e6c75c;
      --success: #10b981;
      --info: #3b82f6;
      --warning: #f59e0b;
      --text: #e2e8f0;
      --text-light: #a0aec0;
      --bg: #121826;
      --card-bg: #1a202c;
      --border: #2d3748;
      --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
      --shadow-hover: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2);
      --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 10px 10px -5px rgba(0, 0, 0, 0.2);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      line-height: 1.6;
      color: var(--text);
      background-color: var(--bg);
      transition: var(--transition);
      overflow-x: hidden;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    /* 动画定义 */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes slideInLeft {
      from { opacity: 0; transform: translateX(-30px); }
      to { opacity: 1; transform: translateX(0); }
    }

    @keyframes slideInRight {
      from { opacity: 0; transform: translateX(30px); }
      to { opacity: 1; transform: translateX(0); }
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    .animate-fadeIn {
      animation: fadeIn 0.6s ease-out;
    }

    .animate-slideInLeft {
      animation: slideInLeft 0.6s ease-out;
    }

    .animate-slideInRight {
      animation: slideInRight 0.6s ease-out;
    }

    .animate-pulse {
      animation: pulse 2s infinite;
    }

    .animate-float {
      animation: float 3s ease-in-out infinite;
    }

    /* 导航栏样式 */
    .navbar {
      background-color: var(--card-bg);
      box-shadow: var(--shadow);
      position: sticky;
      top: 0;
      z-index: 1000;
      backdrop-filter: blur(10px);
      transition: var(--transition);
    }

    .nav-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 20px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .logo {
      display: flex;
      align-items: center;
      font-weight: 700;
      font-size: 1.5rem;
      color: var(--accent);
      text-decoration: none;
      transition: var(--transition);
    }

    .logo:hover {
      transform: translateY(-2px);
    }

    .logo-icon {
      margin-right: 10px;
      font-size: 1.8rem;
    }

    .nav-links {
      display: flex;
      list-style: none;
      gap: 2rem;
    }

    .nav-links a {
      text-decoration: none;
      color: var(--text);
      font-weight: 500;
      padding: 0.5rem 0;
      position: relative;
      transition: var(--transition);
    }

    .nav-links a:hover,
    .nav-links a.active {
      color: var(--accent);
    }

    .nav-links a.active::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 2px;
      background-color: var(--accent);
      transform: scaleX(1);
      transition: transform 0.3s ease;
    }

    .nav-links a::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 2px;
      background-color: var(--accent);
      transform: scaleX(0);
      transition: transform 0.3s ease;
    }

    .nav-links a:hover::after {
      transform: scaleX(1);
    }

    .nav-actions {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .theme-toggle, .user-btn {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 1.25rem;
      padding: 0.5rem;
      border-radius: 50%;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text);
      position: relative;
    }

    .theme-toggle:hover, .user-btn:hover {
      background-color: rgba(0, 0, 0, 0.05);
      transform: rotate(10deg);
    }

    [data-theme="dark"] .theme-toggle:hover,
    [data-theme="dark"] .user-btn:hover {
      background-color: rgba(255, 255, 255, 0.05);
    }

    .user-menu {
      position: absolute;
      top: 100%;
      right: 0;
      background: var(--card-bg);
      border-radius: var(--radius);
      box-shadow: var(--shadow-lg);
      padding: 1rem;
      min-width: 200px;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: var(--transition);
      z-index: 1000;
    }

    .user-menu.active {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .user-menu-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1rem;
      border-radius: var(--radius);
      transition: var(--transition);
      cursor: pointer;
      color: var(--text);
      text-decoration: none;
    }

    .user-menu-item:hover {
      background-color: rgba(0, 0, 0, 0.05);
    }

    [data-theme="dark"] .user-menu-item:hover {
      background-color: rgba(255, 255, 255, 0.05);
    }

    .user-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--accent), var(--accent-light));
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 600;
      font-size: 0.875rem;
    }

    /* 页面头部样式 */
    .page-header {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      color: white;
      padding: 5rem 0;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .page-header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23d4af37' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
      opacity: 0.3;
    }

    .header-content {
      max-width: 800px;
      margin: 0 auto;
      padding: 0 20px;
      position: relative;
      z-index: 1;
    }

    .main-title {
      font-size: 3rem;
      font-weight: 700;
      margin-bottom: 1rem;
      background: linear-gradient(135deg, #fff 0%, var(--accent-light) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: fadeIn 1s ease-out;
    }

    .subtitle {
      font-size: 1.25rem;
      opacity: 0.9;
      margin-bottom: 2rem;
      animation: fadeIn 1s ease-out 0.2s both;
    }

    .stats-bar {
      display: flex;
      justify-content: center;
      gap: 3rem;
      margin-top: 3rem;
      animation: fadeIn 1s ease-out 0.4s both;
    }

    .stat-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: var(--transition);
    }

    .stat-item:hover {
      transform: translateY(-5px);
    }

    .stat-number {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--accent);
    }

    .stat-label {
      font-size: 0.875rem;
      opacity: 0.8;
    }

    /* 用户系统样式 */
    .auth-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      opacity: 0;
      visibility: hidden;
      transition: var(--transition);
    }

    .auth-modal.active {
      opacity: 1;
      visibility: visible;
    }

    .auth-content {
      background: var(--card-bg);
      border-radius: var(--radius-lg);
      padding: 2rem;
      width: 90%;
      max-width: 400px;
      box-shadow: var(--shadow-lg);
      transform: scale(0.9);
      transition: var(--transition);
    }

    .auth-modal.active .auth-content {
      transform: scale(1);
    }

    .auth-tabs {
      display: flex;
      margin-bottom: 2rem;
      border-bottom: 1px solid var(--border);
    }

    .auth-tab {
      flex: 1;
      padding: 1rem;
      text-align: center;
      background: none;
      border: none;
      color: var(--text-light);
      cursor: pointer;
      transition: var(--transition);
      border-bottom: 2px solid transparent;
    }

    .auth-tab.active {
      color: var(--accent);
      border-bottom-color: var(--accent);
    }

    .auth-form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .form-group label {
      font-weight: 500;
      color: var(--text);
    }

    .form-group input {
      padding: 0.75rem 1rem;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background: var(--card-bg);
      color: var(--text);
      transition: var(--transition);
    }

    .form-group input:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.2);
    }

    .btn-auth {
      background: var(--accent);
      color: white;
      border: none;
      padding: 0.75rem 1rem;
      border-radius: var(--radius);
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      margin-top: 1rem;
    }

    .btn-auth:hover {
      background: var(--accent-light);
      transform: translateY(-2px);
    }

    /* Turnstile 小部件样式 */
    .turnstile-container {
      margin: 1rem 0;
      display: flex;
      justify-content: center;
    }

    /* 收藏夹样式 */
    .favorites-section {
      padding: 4rem 0;
      background: linear-gradient(135deg, var(--bg) 0%, var(--card-bg) 100%);
    }

    .favorites-empty {
      text-align: center;
      padding: 3rem;
      color: var(--text-light);
    }

    .favorites-empty i {
      font-size: 4rem;
      margin-bottom: 1rem;
      color: var(--accent);
      opacity: 0.5;
    }

    /* 航空公司样式 */
    .airlines-section {
      padding: 4rem 0;
    }

    .airlines-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
      margin-top: 2rem;
    }

    .airline-card {
      background: var(--card-bg);
      border-radius: var(--radius);
      padding: 1.5rem;
      box-shadow: var(--shadow);
      transition: var(--transition);
      border: 1px solid var(--border);
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .airline-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-hover);
    }

    .airline-logo {
      width: 60px;
      height: 60px;
      border-radius: var(--radius);
      background: var(--primary);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 700;
      font-size: 1.5rem;
      flex-shrink: 0;
    }

    .airline-info h4 {
      margin-bottom: 0.5rem;
      color: var(--text);
    }

    .airline-info p {
      color: var(--text-light);
      font-size: 0.875rem;
    }

    /* 导出功能样式 */
    .export-section {
      padding: 3rem 0;
      background: var(--card-bg);
    }

    .export-options {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
      margin-top: 2rem;
    }

    .export-option {
      background: var(--bg);
      border-radius: var(--radius);
      padding: 2rem;
      text-align: center;
      transition: var(--transition);
      cursor: pointer;
      border: 2px solid transparent;
    }

    .export-option:hover {
      transform: translateY(-5px);
      border-color: var(--accent);
      box-shadow: var(--shadow-hover);
    }

    .export-option i {
      font-size: 2.5rem;
      color: var(--accent);
      margin-bottom: 1rem;
    }

    /* 筛选区样式 */
    .filters-section {
      padding: 3rem 0;
      background-color: var(--card-bg);
      box-shadow: var(--shadow);
    }

    .section-title {
      font-size: 1.75rem;
      font-weight: 600;
      margin-bottom: 1.5rem;
      color: var(--text);
      position: relative;
      display: inline-block;
    }

    .section-title::after {
      content: '';
      position: absolute;
      bottom: -8px;
      left: 0;
      width: 50px;
      height: 3px;
      background-color: var(--accent);
      transition: width 0.3s ease;
    }

    .section-title:hover::after {
      width: 100%;
    }

    .filters-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 1.5rem;
      align-items: end;
    }

    .filter-group {
      display: flex;
      flex-direction: column;
    }

    .filter-group label {
      font-size: 0.875rem;
      font-weight: 500;
      margin-bottom: 0.5rem;
      color: var(--text-light);
    }

    .filter-group input,
    .filter-group select {
      padding: 0.75rem 1rem;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background-color: var(--card-bg);
      color: var(--text);
      font-size: 0.875rem;
      transition: var(--transition);
    }

    .filter-group input:focus,
    .filter-group select:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.2);
    }

    .range-group .range-inputs {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .range-separator {
      color: var(--text-light);
      font-weight: 500;
    }

    .reset-btn {
      background-color: transparent;
      color: var(--accent);
      border: 1px solid var(--accent);
      padding: 0.75rem 1.5rem;
      border-radius: var(--radius);
      cursor: pointer;
      font-weight: 500;
      transition: var(--transition);
      align-self: end;
      height: fit-content;
    }

    .reset-btn:hover {
      background-color: rgba(212, 175, 55, 0.1);
      transform: translateY(-2px);
    }

    /* 飞机展示区样式 */
    .aircraft-section {
      padding: 4rem 0;
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
    }

    .results-info {
      display: flex;
      align-items: center;
      gap: 1rem;
      color: var(--text-light);
      font-size: 0.875rem;
    }

    .view-controls {
      display: flex;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      overflow: hidden;
    }

    .view-btn {
      background: none;
      border: none;
      padding: 0.5rem 0.75rem;
      cursor: pointer;
      color: var(--text-light);
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .view-btn.active {
      background-color: var(--accent);
      color: white;
    }

    .loading-indicator {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 3rem;
      color: var(--text-light);
    }

    .spinner {
      width: 40px;
      height: 40px;
      border: 4px solid rgba(0, 0, 0, 0.1);
      border-left-color: var(--accent);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: 1rem;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    .no-results {
      text-align: center;
      padding: 3rem;
      color: var(--text-light);
      background-color: var(--card-bg);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }

    .no-results-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
      color: var(--accent);
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 2rem;
    }

    .aircraft-card {
      background-color: var(--card-bg);
      border-radius: var(--radius);
      overflow: hidden;
      box-shadow: var(--shadow);
      transition: var(--transition);
      cursor: pointer;
      border: 1px solid var(--border);
      animation: fadeIn 0.6s ease-out;
    }

    .aircraft-card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: var(--shadow-hover);
    }

    .aircraft-header {
      padding: 1.5rem;
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
      color: white;
      position: relative;
    }

    .aircraft-header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffffff' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
      opacity: 0.3;
    }

    .aircraft-name {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 0.25rem;
      position: relative;
      z-index: 1;
    }

    .aircraft-maker {
      font-size: 1rem;
      opacity: 0.9;
      position: relative;
      z-index: 1;
    }

    .aircraft-info {
      padding: 1.5rem;
    }

    .aircraft-description {
      color: var(--text-light);
      margin-bottom: 1.5rem;
      font-size: 0.9rem;
    }

    .aircraft-specs {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .spec-item {
      display: flex;
      flex-direction: column;
    }

    .spec-label {
      font-size: 0.75rem;
      color: var(--text-light);
      margin-bottom: 0.25rem;
    }

    .spec-value {
      font-size: 0.875rem;
      font-weight: 500;
    }

    .aircraft-actions {
      display: flex;
      justify-content: space-between;
      padding-top: 1rem;
      border-top: 1px solid var(--border);
    }

    .btn-primary, .btn-secondary {
      padding: 0.5rem 1rem;
      border: none;
      border-radius: var(--radius);
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      font-size: 0.875rem;
    }

    .btn-primary {
      background-color: var(--accent);
      color: white;
    }

    .btn-primary:hover {
      background-color: var(--accent-light);
      transform: translateY(-2px);
    }

    .btn-secondary {
      background-color: transparent;
      color: var(--accent);
      border: 1px solid var(--accent);
    }

    .btn-secondary:hover {
      background-color: rgba(212, 175, 55, 0.1);
      transform: translateY(-2px);
    }

    .favorite-btn {
      background: none;
      border: none;
      color: var(--text-light);
      cursor: pointer;
      font-size: 1.25rem;
      transition: var(--transition);
    }

    .favorite-btn.active {
      color: #e74c3c;
      animation: pulse 0.5s ease;
    }

    .favorite-btn:hover {
      transform: scale(1.2);
    }

    /* 对比区样式 */
    .compare-section {
      padding: 4rem 0;
      background-color: var(--card-bg);
      box-shadow: var(--shadow);
    }

    .section-description {
      color: var(--text-light);
      margin-bottom: 2rem;
    }

    .compare-controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
      padding: 1.5rem;
      background-color: var(--card-bg);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
    }

    .selected-aircraft {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .selected-aircraft-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      background-color: var(--accent);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: var(--radius);
      font-size: 0.875rem;
      animation: fadeIn 0.3s ease;
    }

    .remove-aircraft {
      background: none;
      border: none;
      color: white;
      cursor: pointer;
      font-size: 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
    }

    .remove-aircraft:hover {
      transform: scale(1.2);
    }

    .placeholder-text {
      color: var(--text-light);
      font-style: italic;
    }

    .compare-actions {
      display: flex;
      gap: 1rem;
    }

    .compare-table-container {
      overflow-x: auto;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      animation: fadeIn 0.6s ease;
    }

    .compare-table {
      width: 100%;
      border-collapse: collapse;
      background-color: var(--card-bg);
      border-radius: var(--radius);
      overflow: hidden;
    }

    .compare-table th,
    .compare-table td {
      padding: 1rem;
      text-align: left;
      border-bottom: 1px solid var(--border);
    }

    .compare-table th {
      background-color: var(--primary);
      color: white;
      font-weight: 600;
    }

    .compare-table tr:last-child td {
      border-bottom: none;
    }

    .highlight-cell {
      background-color: rgba(212, 175, 55, 0.1);
    }

    /* 统计区样式 */
    .stats-section {
      padding: 4rem 0;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
    }

    .stat-card {
      background-color: var(--card-bg);
      border-radius: var(--radius);
      padding: 2rem;
      box-shadow: var(--shadow);
      transition: var(--transition);
      border: 1px solid var(--border);
    }

    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-hover);
    }

    .stat-icon {
      font-size: 2.5rem;
      margin-bottom: 1rem;
      color: var(--accent);
    }

    .stat-card h3 {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 1.5rem;
    }

    .stat-chart {
      height: 200px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-light);
      font-style: italic;
    }

    /* 关于区样式 */
    .about-section {
      padding: 4rem 0;
      background-color: var(--card-bg);
      box-shadow: var(--shadow);
    }

    .about-content {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 3rem;
    }

    .about-text p {
      margin-bottom: 1rem;
    }

    .update-info {
      margin-top: 1.5rem;
      padding: 1.5rem;
      background-color: var(--card-bg);
      border-radius: var(--radius);
      border-left: 4px solid var(--accent);
      box-shadow: var(--shadow);
    }

    .about-features h3 {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 1.5rem;
    }

    .about-features ul {
      list-style: none;
    }

    .about-features li {
      margin-bottom: 0.75rem;
      position: relative;
      padding-left: 1.5rem;
    }

    .about-features li::before {
      content: '✓';
      position: absolute;
      left: 0;
      color: var(--accent);
      font-weight: bold;
    }

    /* 页脚样式 */
    .page-footer {
      background-color: var(--primary);
      color: white;
      padding: 3rem 0 1rem;
    }

    .footer-content {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
      margin-bottom: 2rem;
    }

    .footer-section h3,
    .footer-section h4 {
      margin-bottom: 1rem;
    }

    .footer-section ul {
      list-style: none;
    }

    .footer-section li {
      margin-bottom: 0.5rem;
    }

    .footer-section a {
      color: rgba(255, 255, 255, 0.8);
      text-decoration: none;
      transition: var(--transition);
    }

    .footer-section a:hover {
      color: var(--accent);
    }

    .footer-bottom {
      text-align: center;
      padding-top: 2rem;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      color: rgba(255, 255, 255, 0.7);
      font-size: 0.875rem;
    }

    /* 响应式设计 */
    @media (max-width: 768px) {
      .nav-container {
        flex-direction: column;
        gap: 1rem;
      }
      
      .nav-links {
        gap: 1rem;
      }
      
      .stats-bar {
        gap: 1.5rem;
      }
      
      .stat-number {
        font-size: 1.5rem;
      }
      
      .filters-container {
        grid-template-columns: 1fr;
      }
      
      .section-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
      }
      
      .grid {
        grid-template-columns: 1fr;
      }
      
      .compare-controls {
        flex-direction: column;
        gap: 1rem;
        align-items: flex-start;
      }
      
      .compare-actions {
        width: 100%;
        justify-content: flex-end;
      }
      
      .about-content {
        grid-template-columns: 1fr;
      }
      
      .footer-content {
        grid-template-columns: 1fr;
      }
    }

    /* 图表样式 */
    .chart-item {
      display: flex;
      align-items: center;
      margin-bottom: 0.75rem;
      gap: 0.5rem;
    }

    .chart-label {
      min-width: 100px;
      font-size: 0.875rem;
    }

    .chart-bar {
      height: 8px;
      background-color: var(--accent);
      border-radius: 4px;
      transition: width 0.5s ease;
    }

    .chart-value {
      font-size: 0.875rem;
      font-weight: 500;
      min-width: 20px;
      text-align: right;
    }

    /* 制造商徽章 */
    .maker-badge {
      display: inline-block;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      font-size: 0.75rem;
      font-weight: 500;
      margin-right: 0.5rem;
    }

    .boeing { background-color: #0033a0; color: white; }
    .airbus { background-color: #00a0e9; color: white; }
    .comac { background-color: #d7000f; color: white; }
    .bombardier { background-color: #6a0dad; color: white; }
    .embraer { background-color: #ff6b00; color: white; }
    .antonov { background-color: #0057b8; color: white; }
    .atr { background-color: #1e90ff; color: white; }
    .dehavilland { background-color: #228b22; color: white; }
    .gulfstream { background-color: #ff4500; color: white; }
    .cessna { background-color: #4169e1; color: white; }
    .dassault { background-color: #000080; color: white; }

    /* 通知样式 */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 1rem 1.5rem;
      background: var(--card-bg);
      border-radius: var(--radius);
      box-shadow: var(--shadow-lg);
      border-left: 4px solid var(--accent);
      transform: translateX(400px);
      transition: transform 0.3s ease;
      z-index: 3000;
    }

    .notification.show {
      transform: translateX(0);
    }

    /* 错误样式 */
    .error {
      color: #e74c3c;
      font-size: 0.875rem;
      margin-top: 0.25rem;
    }
  </style>
</head>
<body>
  <!-- 顶部导航栏 -->
  <nav class="navbar">
    <div class="nav-container">
      <a href="#" class="logo">
        <span class="logo-icon"><i class="fas fa-plane"></i></span>
        <span class="logo-text">高级飞机数据库</span>
      </a>
      <ul class="nav-links">
        <li><a href="#" class="active">首页</a></li>
        <li><a href="#aircraftGrid">浏览飞机</a></li>
        <li><a href="#compareSection">对比工具</a></li>
        <li><a href="#airlines">航空公司</a></li>
        <li><a href="#stats">数据统计</a></li>
        <li><a href="#about">关于我们</a></li>
      </ul>
      <div class="nav-actions">
        <button id="themeToggle" class="theme-toggle" aria-label="切换主题">
          <span class="theme-icon"><i class="fas fa-moon"></i></span>
        </button>
        <div class="user-container">
          <button id="userBtn" class="user-btn" aria-label="用户菜单">
            <div class="user-avatar">U</div>
          </button>
          <div class="user-menu" id="userMenu">
            <div class="user-menu-item" id="loginBtn">
              <i class="fas fa-sign-in-alt"></i>
              <span>登录/注册</span>
            </div>
            <div class="user-menu-item" id="favoritesBtn" style="display: none;">
              <i class="fas fa-heart"></i>
              <span>我的收藏</span>
            </div>
            <div class="user-menu-item" id="exportBtn" style="display: none;">
              <i class="fas fa-download"></i>
              <span>导出数据</span>
            </div>
            <div class="user-menu-item" id="logoutBtn" style="display: none;">
              <i class="fas fa-sign-out-alt"></i>
              <span>退出登录</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- 登录/注册模态框 -->
  <div class="auth-modal" id="authModal">
    <div class="auth-content">
      <div class="auth-tabs">
        <button class="auth-tab active" data-tab="login">登录</button>
        <button class="auth-tab" data-tab="register">注册</button>
      </div>
      
      <form class="auth-form" id="loginForm">
        <div class="form-group">
          <label for="loginEmail">邮箱</label>
          <input type="email" id="loginEmail" required>
        </div>
        <div class="form-group">
          <label for="loginPassword">密码</label>
          <input type="password" id="loginPassword" required>
        </div>
        <!-- Turnstile 小部件 -->
        <div class="turnstile-container">
          <div class="cf-turnstile" data-sitekey="0x4AAAAAAB_v5ugGSsMqr9KP" data-theme="auto"></div>
        </div>
        <button type="submit" class="btn-auth">登录</button>
      </form>
      
      <form class="auth-form" id="registerForm" style="display: none;">
        <div class="form-group">
          <label for="registerName">用户名</label>
          <input type="text" id="registerName" required>
        </div>
        <div class="form-group">
          <label for="registerEmail">邮箱</label>
          <input type="email" id="registerEmail" required>
        </div>
        <div class="form-group">
          <label for="registerPassword">密码</label>
          <input type="password" id="registerPassword" required>
        </div>
        <!-- Turnstile 小部件 -->
        <div class="turnstile-container">
          <div class="cf-turnstile" data-sitekey="0x4AAAAAAB_v5ugGSsMqr9KP" data-theme="auto"></div>
        </div>
        <button type="submit" class="btn-auth">注册</button>
      </form>
    </div>
  </div>

  <!-- 通知 -->
  <div class="notification" id="notification"></div>

  <!-- 页面头部 -->
  <header class="page-header">
    <div class="header-content">
      <h1 class="main-title">高级飞机数据库</h1>
      <p class="subtitle">探索全球商用飞机详细信息 | 数据更新至2025年10月6日</p>
      <div class="stats-bar">
        <div class="stat-item">
          <span class="stat-number">80+</span>
          <span class="stat-label">飞机型号</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">15+</span>
          <span class="stat-label">制造商</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">70+</span>
          <span class="stat-label">运营国家</span>
        </div>
      </div>
    </div>
  </header>

  <!-- 收藏夹区域 -->
  <section id="favoritesSection" class="favorites-section" style="display: none;">
    <div class="container">
      <h2 class="section-title">我的收藏</h2>
      <div class="grid" id="favoritesGrid">
        <div class="favorites-empty">
          <i class="fas fa-heart"></i>
          <h3>暂无收藏的飞机</h3>
          <p>浏览飞机并点击心形图标添加到收藏夹</p>
        </div>
      </div>
    </div>
  </section>

  <!-- 航空公司区域 -->
  <section id="airlines" class="airlines-section">
    <div class="container">
      <h2 class="section-title">主要航空公司</h2>
      <p class="section-description">全球主要航空公司及其机队信息</p>
      
      <div class="airlines-grid" id="airlinesGrid">
        <!-- 航空公司数据将通过JavaScript动态生成 -->
      </div>
    </div>
  </section>

  <!-- 导出功能区域 -->
  <section id="exportSection" class="export-section" style="display: none;">
    <div class="container">
      <h2 class="section-title">数据导出</h2>
      <p class="section-description">导出您收藏的飞机数据或对比结果</p>
      
      <div class="export-options">
        <div class="export-option" data-format="pdf">
          <i class="fas fa-file-pdf"></i>
          <h4>PDF 格式</h4>
          <p>高质量文档，适合打印</p>
        </div>
        <div class="export-option" data-format="excel">
          <i class="fas fa-file-excel"></i>
          <h4>Excel 格式</h4>
          <p>电子表格，便于分析</p>
        </div>
        <div class="export-option" data-format="json">
          <i class="fas fa-code"></i>
          <h4>JSON 格式</h4>
          <p>结构化数据，开发使用</p>
        </div>
      </div>
    </div>
  </section>

  <!-- 筛选区 -->
  <section class="filters-section">
    <div class="container">
      <h2 class="section-title">筛选飞机</h2>
      <div class="filters-container">
        <div class="filter-group">
          <label for="search">搜索型号或制造商</label>
          <input type="text" id="search" placeholder="例如: 737, A320, C919...">
        </div>
        
        <div class="filter-group">
          <label for="makerFilter">制造商</label>
          <select id="makerFilter">
            <option value="">全部制造商</option>
            <option value="波音">波音</option>
            <option value="空客">空中客车</option>
            <option value="中国商飞">中国商飞</option>
            <option value="庞巴迪">庞巴迪</option>
            <option value="巴西航空工业公司">巴西航空工业公司</option>
            <option value="安东诺夫">安东诺夫</option>
            <option value="ATR">ATR</option>
            <option value="德哈维兰">德哈维兰</option>
            <option value="湾流">湾流</option>
            <option value="赛斯纳">赛斯纳</option>
            <option value="达索">达索</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label for="typeFilter">飞机类型</label>
          <select id="typeFilter">
            <option value="">全部类型</option>
            <option value="窄体客机">窄体客机</option>
            <option value="宽体客机">宽体客机</option>
            <option value="支线客机">支线客机</option>
            <option value="货机">货机</option>
            <option value="公务机">公务机</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label for="eraFilter">首飞年代</label>
          <select id="eraFilter">
            <option value="">全部年代</option>
            <option value="1950s">1950年代</option>
            <option value="1960s">1960年代</option>
            <option value="1970s">1970年代</option>
            <option value="1980s">1980年代</option>
            <option value="1990s">1990年代</option>
            <option value="2000s">2000年代</option>
            <option value="2010s">2010年代</option>
            <option value="2020s">2020年代</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label for="engineFilter">发动机类型</label>
          <select id="engineFilter">
            <option value="">全部发动机类型</option>
            <option value="涡扇">涡扇</option>
            <option value="涡桨">涡桨</option>
            <option value="活塞">活塞</option>
          </select>
        </div>
        
        <div class="filter-group range-group">
          <label for="minRange">航程范围 (km)</label>
          <div class="range-inputs">
            <input type="number" id="minRange" placeholder="最小航程">
            <span class="range-separator">-</span>
            <input type="number" id="maxRange" placeholder="最大航程">
          </div>
        </div>
        
        <button id="resetFilters" class="reset-btn">重置筛选</button>
      </div>
    </div>
  </section>

  <!-- 飞机展示区 -->
  <section class="aircraft-section">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">飞机数据库</h2>
        <div class="results-info">
          <span id="resultsCount">正在加载...</span>
          <div class="view-controls">
            <button id="gridView" class="view-btn active" aria-label="网格视图">
              <i class="fas fa-th"></i>
            </button>
            <button id="listView" class="view-btn" aria-label="列表视图">
              <i class="fas fa-list"></i>
            </button>
          </div>
        </div>
      </div>
      
      <div class="loading-indicator" id="loadingIndicator">
        <div class="spinner"></div>
        <p>正在加载飞机数据...</p>
      </div>
      
      <div class="grid" id="aircraftGrid"></div>
      
      <div class="no-results" id="noResults" style="display: none;">
        <div class="no-results-icon"><i class="fas fa-search"></i></div>
        <h3>未找到匹配的飞机</h3>
        <p>请尝试调整筛选条件或搜索关键词</p>
      </div>
    </div>
  </section>

  <!-- 对比区 -->
  <section id="compareSection" class="compare-section">
    <div class="container">
      <h2 class="section-title">飞机对比工具</h2>
      <p class="section-description">选择最多4架飞机进行详细对比</p>
      
      <div class="compare-controls">
        <div class="selected-aircraft" id="selectedAircraft">
          <p class="placeholder-text">尚未选择任何飞机</p>
        </div>
        <div class="compare-actions">
          <button id="clearCompare" class="btn-secondary" disabled>清空选择</button>
          <button id="runCompare" class="btn-primary" disabled>开始对比</button>
        </div>
      </div>
      
      <div id="compareTable" class="compare-table-container"></div>
    </div>
  </section>

  <!-- 数据统计区 -->
  <section id="stats" class="stats-section">
    <div class="container">
      <h2 class="section-title">数据统计</h2>
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon"><i class="fas fa-chart-pie"></i></div>
          <h3>制造商分布</h3>
          <div class="stat-chart" id="makerChart"></div>
        </div>
        <div class="stat-card">
          <div class="stat-icon"><i class="fas fa-plane"></i></div>
          <h3>飞机类型</h3>
          <div class="stat-chart" id="typeChart"></div>
        </div>
        <div class="stat-card">
          <div class="stat-icon"><i class="fas fa-history"></i></div>
          <h3>年代分布</h3>
          <div class="stat-chart" id="eraChart"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- 关于区 -->
  <section id="about" class="about-section">
    <div class="container">
      <h2 class="section-title">关于本站</h2>
      <div class="about-content">
        <div class="about-text">
          <p>高级飞机数据库是一个为航空爱好者和专业人士设计的综合性平台，收录了全球主要商用飞机型号的详细信息。</p>
          <p>我们的数据来源于公开渠道并持续更新，确保信息准确可靠。目前收录了80多种商用飞机型号，涵盖15家主要制造商。</p>
          <p>网站提供强大的搜索、筛选和对比功能，帮助用户快速找到感兴趣的飞机型号并进行详细比较。</p>
          <div class="update-info">
            <strong>最后更新:</strong> 2025年10月6日
          </div>
        </div>
        <div class="about-features">
          <h3>主要功能</h3>
          <ul>
            <li>详细飞机技术参数</li>
            <li>多维度筛选和搜索</li>
            <li>直观的对比工具</li>
            <li>数据可视化统计</li>
            <li>响应式设计</li>
            <li>深色/浅色主题</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- 页脚 -->
  <footer class="page-footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h3>高级飞机数据库</h3>
          <p>探索航空世界的精彩</p>
        </div>
        <div class="footer-section">
          <h4>快速链接</h4>
          <ul>
            <li><a href="#aircraftGrid">浏览飞机</a></li>
            <li><a href="#compareSection">对比工具</a></li>
            <li><a href="#airlines">航空公司</a></li>
            <li><a href="#stats">数据统计</a></li>
            <li><a href="#about">关于我们</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h4>联系我们</h4>
          <p>如有数据更新建议或问题反馈，请通过以下方式联系我们：</p>
          <p>aviationenthusiast2025@outlook.com</p>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 高级飞机数据库. 保留所有权利.</p>
      </div>
    </div>
  </footer>

  <script>
    // 完整的飞机数据
    const aircraftData = [
      // 波音系列
      {
        id: 1,
        name: "波音 737-800",
        maker: "波音",
        type: "窄体客机",
        era: "1990s",
        engine: "涡扇",
        range: 5765,
        passengers: 189,
        cruiseSpeed: 839,
        length: 39.5,
        wingspan: 35.8,
        description: "波音737系列中最受欢迎的型号之一",
        firstFlight: "1997-07-31",
        status: "在产",
        airlines: ["中国国际航空", "中国南方航空", "美国航空", "联合航空"],
        popularity: 95
      },
      {
        id: 2,
        name: "波音 737 MAX 8",
        maker: "波音",
        type: "窄体客机",
        era: "2010s",
        engine: "涡扇",
        range: 6570,
        passengers: 178,
        cruiseSpeed: 839,
        length: 39.5,
        wingspan: 35.9,
        description: "波音737系列的最新改进型，燃油效率提升20%",
        firstFlight: "2016-01-29",
        status: "在产",
        airlines: ["中国国际航空", "南方航空", "美国航空"],
        popularity: 88
      },
      {
        id: 3,
        name: "波音 747-8",
        maker: "波音",
        type: "宽体客机",
        era: "2000s",
        engine: "涡扇",
        range: 14815,
        passengers: 467,
        cruiseSpeed: 908,
        length: 76.3,
        wingspan: 68.4,
        description: "波音747系列最终型号，空中女王",
        firstFlight: "2011-02-08",
        status: "停产",
        airlines: ["汉莎航空", "大韩航空", "国泰航空"],
        popularity: 92
      },
      {
        id: 4,
        name: "波音 777-300ER",
        maker: "波音",
        type: "宽体客机",
        era: "2000s",
        engine: "涡扇",
        range: 14685,
        passengers: 396,
        cruiseSpeed: 905,
        length: 73.9,
        wingspan: 64.8,
        description: "777系列中航程最远的型号之一",
        firstFlight: "2003-02-24",
        status: "在产",
        airlines: ["阿联酋航空", "新加坡航空", "国泰航空"],
        popularity: 90
      },
      // 空客系列
      {
        id: 5,
        name: "空客 A320-200",
        maker: "空客",
        type: "窄体客机",
        era: "1980s",
        engine: "涡扇",
        range: 6150,
        passengers: 180,
        cruiseSpeed: 828,
        length: 37.6,
        wingspan: 34.1,
        description: "空客A320系列经典型号",
        firstFlight: "1987-02-22",
        status: "在产",
        airlines: ["中国东方航空", "法国航空", "汉莎航空"],
        popularity: 94
      },
      {
        id: 6,
        name: "空客 A320neo",
        maker: "空客",
        type: "窄体客机",
        era: "2010s",
        engine: "涡扇",
        range: 6300,
        passengers: 180,
        cruiseSpeed: 828,
        length: 37.6,
        wingspan: 35.8,
        description: "A320系列新发动机选项，节油15%",
        firstFlight: "2014-09-25",
        status: "在产",
        airlines: ["印度航空", "边疆航空", "精神航空"],
        popularity: 89
      },
      {
        id: 7,
        name: "空客 A350-900",
        maker: "空客",
        type: "宽体客机",
        era: "2010s",
        engine: "涡扇",
        range: 15000,
        passengers: 325,
        cruiseSpeed: 903,
        length: 66.8,
        wingspan: 64.8,
        description: "空客新一代宽体客机",
        firstFlight: "2013-06-14",
        status: "在产",
        airlines: ["卡塔尔航空", "新加坡航空", "国泰航空"],
        popularity: 87
      },
      {
        id: 8,
        name: "空客 A380",
        maker: "空客",
        type: "宽体客机",
        era: "2000s",
        engine: "涡扇",
        range: 15700,
        passengers: 575,
        cruiseSpeed: 903,
        length: 72.7,
        wingspan: 79.8,
        description: "全球最大的双层客机",
        firstFlight: "2005-04-27",
        status: "停产",
        airlines: ["阿联酋航空", "新加坡航空", "澳洲航空"],
        popularity: 96
      },
      // 中国商飞
      {
        id: 9,
        name: "COMAC C919",
        maker: "中国商飞",
        type: "窄体客机",
        era: "2010s",
        engine: "涡扇",
        range: 4075,
        passengers: 168,
        cruiseSpeed: 834,
        length: 38.9,
        wingspan: 35.9,
        description: "中国首款按照国际标准研制的干线客机",
        firstFlight: "2017-05-05",
        status: "在产",
        airlines: ["中国东方航空"],
        popularity: 85
      },
      {
        id: 10,
        name: "COMAC ARJ21",
        maker: "中国商飞",
        type: "支线客机",
        era: "2000s",
        engine: "涡扇",
        range: 2225,
        passengers: 90,
        cruiseSpeed: 828,
        length: 33.5,
        wingspan: 27.3,
        description: "中国首款自主研制的支线喷气客机",
        firstFlight: "2008-11-28",
        status: "在产",
        airlines: ["成都航空", "江西航空"],
        popularity: 78
      }
    ];

    // 航空公司数据
    const airlinesData = [
      {
        id: 1,
        name: "中国国际航空",
        code: "CA",
        country: "中国",
        fleetSize: 450,
        mainAircraft: ["波音 737-800", "空客 A320", "空客 A330", "波音 777"],
        founded: 1988,
        hubs: ["北京首都国际机场", "成都双流国际机场"]
      },
      {
        id: 2,
        name: "中国南方航空",
        code: "CZ",
        country: "中国",
        fleetSize: 600,
        mainAircraft: ["波音 737-800", "空客 A320", "波音 787", "空客 A380"],
        founded: 1988,
        hubs: ["广州白云国际机场", "北京大兴国际机场"]
      },
      {
        id: 3,
        name: "美国航空",
        code: "AA",
        country: "美国",
        fleetSize: 950,
        mainAircraft: ["波音 737-800", "波音 777", "空客 A321", "波音 787"],
        founded: 1926,
        hubs: ["达拉斯/沃斯堡国际机场", "芝加哥奥黑尔国际机场"]
      },
      {
        id: 4,
        name: "阿联酋航空",
        code: "EK",
        country: "阿联酋",
        fleetSize: 260,
        mainAircraft: ["空客 A380", "波音 777", "波音 777X"],
        founded: 1985,
        hubs: ["迪拜国际机场"]
      },
      {
        id: 5,
        name: "新加坡航空",
        code: "SQ",
        country: "新加坡",
        fleetSize: 150,
        mainAircraft: ["空客 A380", "波音 777", "空客 A350", "波音 787"],
        founded: 1947,
        hubs: ["新加坡樟宜机场"]
      }
    ];

    // 用户系统
    let currentUser = null;
    let userFavorites = JSON.parse(localStorage.getItem('userFavorites')) || {};

    // 全局变量
    let filteredAircraft = [];
    let selectedAircraft = [];
    let currentView = 'grid';

    // DOM元素
    const aircraftGrid = document.getElementById('aircraftGrid');
    const searchInput = document.getElementById('search');
    const makerFilter = document.getElementById('makerFilter');
    const typeFilter = document.getElementById('typeFilter');
    const eraFilter = document.getElementById('eraFilter');
    const engineFilter = document.getElementById('engineFilter');
    const minRangeInput = document.getElementById('minRange');
    const maxRangeInput = document.getElementById('maxRange');
    const resetFiltersBtn = document.getElementById('resetFilters');
    const themeToggle = document.getElementById('themeToggle');
    const gridViewBtn = document.getElementById('gridView');
    const listViewBtn = document.getElementById('listView');
    const resultsCount = document.getElementById('resultsCount');
    const loadingIndicator = document.getElementById('loadingIndicator');
    const noResults = document.getElementById('noResults');
    const selectedAircraftContainer = document.getElementById('selectedAircraft');
    const clearCompareBtn = document.getElementById('clearCompare');
    const runCompareBtn = document.getElementById('runCompare');
    const compareTable = document.getElementById('compareTable');
    const userBtn = document.getElementById('userBtn');
    const userMenu = document.getElementById('userMenu');
    const authModal = document.getElementById('authModal');
    const loginForm = document.getElementById('loginForm');
    const registerForm = document.getElementById('registerForm');
    const authTabs = document.querySelectorAll('.auth-tab');
    const favoritesSection = document.getElementById('favoritesSection');
    const favoritesGrid = document.getElementById('favoritesGrid');
    const airlinesGrid = document.getElementById('airlinesGrid');
    const exportSection = document.getElementById('exportSection');
    const notification = document.getElementById('notification');

    // Turnstile 验证函数
    async function verifyTurnstile() {
      const turnstileResponse = document.querySelector('[name="cf-turnstile-response"]');
      
      if (!turnstileResponse || !turnstileResponse.value) {
        return { success: false, message: '请完成人机验证' };
      }

      try {
        // 在实际应用中，这里应该发送到您的后端服务器进行验证
        // 由于这是前端演示，我们只做基本检查
        const response = turnstileResponse.value;
        
        if (response && response.length > 10) {
          return { success: true };
        } else {
          return { success: false, message: '验证失败，请重试' };
        }
      } catch (error) {
        console.error('Turnstile verification error:', error);
        return { success: false, message: '验证服务暂时不可用' };
      }
    }

    // 重置 Turnstile
    function resetTurnstile() {
      // Turnstile 会自动重置，这里我们只需要确保有新的挑战
      const turnstileElements = document.querySelectorAll('.cf-turnstile');
      turnstileElements.forEach(element => {
        // 重新渲染 Turnstile
        if (window.turnstile) {
          window.turnstile.reset();
        }
      });
    }

    // 初始化
    document.addEventListener('DOMContentLoaded', function() {
      initializeApp();
    });

    function initializeApp() {
      // 加载飞机数据
      filteredAircraft = [...aircraftData];
      
      // 显示加载状态
      showLoading();
      
      // 模拟数据加载延迟
      setTimeout(() => {
        renderAircraftGrid();
        renderAirlinesGrid();
        setupEventListeners();
        updateResultsCount();
        hideLoading();
        updateUserInterface();
        
        // 初始化统计图表
        initStatsCharts();
      }, 800);
    }

    function setupEventListeners() {
      // 筛选事件
      searchInput.addEventListener('input', applyFilters);
      makerFilter.addEventListener('change', applyFilters);
      typeFilter.addEventListener('change', applyFilters);
      eraFilter.addEventListener('change', applyFilters);
      engineFilter.addEventListener('change', applyFilters);
      minRangeInput.addEventListener('input', applyFilters);
      maxRangeInput.addEventListener('input', applyFilters);
      
      // 重置筛选
      resetFiltersBtn.addEventListener('click', resetFilters);
      
      // 主题切换
      themeToggle.addEventListener('click', toggleTheme);
      
      // 视图切换
      gridViewBtn.addEventListener('click', () => switchView('grid'));
      listViewBtn.addEventListener('click', () => switchView('list'));
      
      // 对比功能
      clearCompareBtn.addEventListener('click', clearCompare);
      runCompareBtn.addEventListener('click', runCompare);
      
      // 用户系统
      userBtn.addEventListener('click', toggleUserMenu);
      document.addEventListener('click', closeUserMenu);
      
      // 认证表单
      authTabs.forEach(tab => {
        tab.addEventListener('click', () => switchAuthTab(tab.dataset.tab));
      });
      
      loginForm.addEventListener('submit', handleLogin);
      registerForm.addEventListener('submit', handleRegister);
      
      // 用户菜单项
      document.getElementById('favoritesBtn').addEventListener('click', showFavorites);
      document.getElementById('exportBtn').addEventListener('click', showExport);
      document.getElementById('logoutBtn').addEventListener('click', handleLogout);
      
      // 导出选项
      document.querySelectorAll('.export-option').forEach(option => {
        option.addEventListener('click', () => handleExport(option.dataset.format));
      });

      // 登录按钮事件
      document.getElementById('loginBtn').addEventListener('click', () => {
        authModal.classList.add('active');
        // 重置 Turnstile 当打开模态框时
        setTimeout(resetTurnstile, 100);
      });

      // 关闭模态框时重置表单和 Turnstile
      authModal.addEventListener('click', (e) => {
        if (e.target === authModal) {
          authModal.classList.remove('active');
          resetTurnstile();
        }
      });
    }

    function showLoading() {
      loadingIndicator.style.display = 'flex';
      aircraftGrid.style.display = 'none';
      noResults.style.display = 'none';
    }

    function hideLoading() {
      loadingIndicator.style.display = 'none';
      aircraftGrid.style.display = 'grid';
    }

    function applyFilters() {
      const searchTerm = searchInput.value.toLowerCase();
      const makerValue = makerFilter.value;
      const typeValue = typeFilter.value;
      const eraValue = eraFilter.value;
      const engineValue = engineFilter.value;
      const minRange = minRangeInput.value ? parseInt(minRangeInput.value) : 0;
      const maxRange = maxRangeInput.value ? parseInt(maxRangeInput.value) : Infinity;
      
      filteredAircraft = aircraftData.filter(aircraft => {
        // 搜索条件
        const matchesSearch = searchTerm === '' || 
          aircraft.name.toLowerCase().includes(searchTerm) ||
          aircraft.maker.toLowerCase().includes(searchTerm);
        
        // 筛选条件
        const matchesMaker = makerValue === '' || aircraft.maker === makerValue;
        const matchesType = typeValue === '' || aircraft.type === typeValue;
        const matchesEra = eraValue === '' || aircraft.era === eraValue;
        const matchesEngine = engineValue === '' || aircraft.engine === engineValue;
        const matchesRange = aircraft.range >= minRange && aircraft.range <= maxRange;
        
        return matchesSearch && matchesMaker && matchesType && matchesEra && matchesEngine && matchesRange;
      });
      
      renderAircraftGrid();
      updateResultsCount();
    }

    function resetFilters() {
      searchInput.value = '';
      makerFilter.value = '';
      typeFilter.value = '';
      eraFilter.value = '';
      engineFilter.value = '';
      minRangeInput.value = '';
      maxRangeInput.value = '';
      
      applyFilters();
    }

    function toggleTheme() {
      const currentTheme = document.documentElement.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      
      document.documentElement.setAttribute('data-theme', newTheme);
      
      // 更新主题图标
      const themeIcon = themeToggle.querySelector('.theme-icon');
      themeIcon.innerHTML = newTheme === 'dark' ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
      
      // 保存主题偏好
      localStorage.setItem('theme', newTheme);
    }

    function switchView(view) {
      currentView = view;
      
      // 更新活动按钮状态
      if (view === 'grid') {
        gridViewBtn.classList.add('active');
        listViewBtn.classList.remove('active');
        aircraftGrid.classList.remove('list-view');
      } else {
        listViewBtn.classList.add('active');
        gridViewBtn.classList.remove('active');
        aircraftGrid.classList.add('list-view');
      }
      
      renderAircraftGrid();
    }

    function renderAircraftGrid() {
      if (filteredAircraft.length === 0) {
        aircraftGrid.style.display = 'none';
        noResults.style.display = 'block';
        return;
      }
      
      aircraftGrid.style.display = currentView === 'grid' ? 'grid' : 'block';
      noResults.style.display = 'none';
      
      aircraftGrid.innerHTML = '';
      
      filteredAircraft.forEach(aircraft => {
        const aircraftCard = createAircraftCard(aircraft);
        aircraftGrid.appendChild(aircraftCard);
      });
    }

    function createAircraftCard(aircraft) {
      const card = document.createElement('div');
      card.className = 'aircraft-card';
      card.dataset.id = aircraft.id;
      
      const isSelected = selectedAircraft.some(a => a.id === aircraft.id);
      const isFavorited = currentUser && userFavorites[currentUser.id]?.includes(aircraft.id);
      
      card.innerHTML = `
        <div class="aircraft-header">
          <div style="display: flex; justify-content: space-between; align-items: flex-start;">
            <div>
              <h3 class="aircraft-name">${aircraft.name}</h3>
              <p class="aircraft-maker">${aircraft.maker}</p>
            </div>
            <button class="favorite-btn ${isFavorited ? 'active' : ''}" data-id="${aircraft.id}">
              <i class="fas fa-heart"></i>
            </button>
          </div>
        </div>
        <div class="aircraft-info">
          <p class="aircraft-description">${aircraft.description}</p>
          
          <div class="aircraft-specs">
            <div class="spec-item">
              <span class="spec-label">类型</span>
              <span class="spec-value">${aircraft.type}</span>
            </div>
            <div class="spec-item">
              <span class="spec-label">航程</span>
              <span class="spec-value">${aircraft.range.toLocaleString()} km</span>
            </div>
            <div class="spec-item">
              <span class="spec-label">载客</span>
              <span class="spec-value">${aircraft.passengers}</span>
            </div>
            <div class="spec-item">
              <span class="spec-label">巡航速度</span>
              <span class="spec-value">${aircraft.cruiseSpeed} km/h</span>
            </div>
          </div>
          
          <div class="aircraft-actions">
            <button class="btn-secondary details-btn" data-id="${aircraft.id}">详情</button>
            <button class="btn-primary compare-btn ${isSelected ? 'selected' : ''}" data-id="${aircraft.id}">
              ${isSelected ? '已选择' : '加入对比'}
            </button>
          </div>
        </div>
      `;
      
      // 添加事件监听器
      const favoriteBtn = card.querySelector('.favorite-btn');
      favoriteBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        toggleFavorite(aircraft.id);
      });
      
      const compareBtn = card.querySelector('.compare-btn');
      compareBtn.addEventListener('click', () => toggleAircraftCompare(aircraft));
      
      const detailsBtn = card.querySelector('.details-btn');
      detailsBtn.addEventListener('click', () => showAircraftDetails(aircraft));
      
      return card;
    }

    function toggleAircraftCompare(aircraft) {
      const index = selectedAircraft.findIndex(a => a.id === aircraft.id);
      
      if (index === -1) {
        // 添加到对比
        if (selectedAircraft.length >= 4) {
          alert('最多只能选择4架飞机进行对比');
          return;
        }
        selectedAircraft.push(aircraft);
      } else {
        // 从对比中移除
        selectedAircraft.splice(index, 1);
      }
      
      updateCompareUI();
      renderAircraftGrid(); // 重新渲染以更新按钮状态
    }

    function updateCompareUI() {
      // 更新已选择飞机显示
      selectedAircraftContainer.innerHTML = '';
      
      if (selectedAircraft.length === 0) {
        selectedAircraftContainer.innerHTML = '<p class="placeholder-text">尚未选择任何飞机</p>';
        clearCompareBtn.disabled = true;
        runCompareBtn.disabled = true;
      } else {
        selectedAircraft.forEach(aircraft => {
          const selectedItem = document.createElement('div');
          selectedItem.className = 'selected-aircraft-item';
          selectedItem.innerHTML = `
            <span>${aircraft.name}</span>
            <button class="remove-aircraft" data-id="${aircraft.id}">×</button>
          `;
          
          const removeBtn = selectedItem.querySelector('.remove-aircraft');
          removeBtn.addEventListener('click', () => toggleAircraftCompare(aircraft));
          
          selectedAircraftContainer.appendChild(selectedItem);
        });
        
        clearCompareBtn.disabled = false;
        runCompareBtn.disabled = false;
      }
    }

    function clearCompare() {
      selectedAircraft = [];
      updateCompareUI();
      renderAircraftGrid();
      compareTable.innerHTML = '';
    }

    function runCompare() {
      if (selectedAircraft.length < 2) {
        alert('请至少选择2架飞机进行对比');
        return;
      }
      
      // 滚动到对比区域
      document.getElementById('compareSection').scrollIntoView({ behavior: 'smooth' });
      
      // 生成对比表格
      compareTable.innerHTML = generateCompareTable();
    }

    function generateCompareTable() {
      const specs = [
        { key: 'name', label: '型号' },
        { key: 'maker', label: '制造商' },
        { key: 'type', label: '类型' },
        { key: 'era', label: '年代' },
        { key: 'engine', label: '发动机' },
        { key: 'range', label: '航程 (km)', format: (val) => val.toLocaleString() },
        { key: 'passengers', label: '载客量' },
        { key: 'cruiseSpeed', label: '巡航速度 (km/h)' },
        { key: 'length', label: '长度 (m)' },
        { key: 'wingspan', label: '翼展 (m)' },
        { key: 'firstFlight', label: '首飞日期' },
        { key: 'status', label: '状态' }
      ];
      
      let tableHTML = `
        <table class="compare-table">
          <thead>
            <tr>
              <th>规格</th>
      `;
      
      // 表头 - 飞机名称
      selectedAircraft.forEach(aircraft => {
        tableHTML += `<th>${aircraft.name}</th>`;
      });
      
      tableHTML += `</tr></thead><tbody>`;
      
      // 表格内容
      specs.forEach(spec => {
        tableHTML += `<tr><td>${spec.label}</td>`;
        
        selectedAircraft.forEach(aircraft => {
          let value = aircraft[spec.key];
          if (spec.format) {
            value = spec.format(value);
          }
          
          // 高亮显示最优值（对于数值型规格）
          if (typeof value === 'number' || !isNaN(value)) {
            const numericValue = parseFloat(value);
            if (!isNaN(numericValue)) {
              const values = selectedAircraft.map(a => {
                const val = a[spec.key];
                return typeof val === 'number' ? val : parseFloat(val);
              }).filter(v => !isNaN(v));
              
              const maxValue = Math.max(...values);
              const minValue = Math.min(...values);
              
              // 对于航程、载客量等，越大越好
              if (['range', 'passengers', 'cruiseSpeed'].includes(spec.key)) {
                if (numericValue === maxValue) {
                  tableHTML += `<td class="highlight-cell">${value}</td>`;
                  return;
                }
              }
            }
          }
          
          tableHTML += `<td>${value}</td>`;
        });
        
        tableHTML += `</tr>`;
      });
      
      tableHTML += `</tbody></table>`;
      
      return tableHTML;
    }

    function showAircraftDetails(aircraft) {
      // 在实际应用中，这里可以打开一个模态框显示详细信息
      alert(`${aircraft.name} 详细信息:\n\n制造商: ${aircraft.maker}\n类型: ${aircraft.type}\n航程: ${aircraft.range.toLocaleString()} km\n载客: ${aircraft.passengers}\n巡航速度: ${aircraft.cruiseSpeed} km/h\n首飞: ${aircraft.firstFlight}\n状态: ${aircraft.status}\n\n${aircraft.description}`);
    }

    function updateResultsCount() {
      const count = filteredAircraft.length;
      resultsCount.textContent = `找到 ${count} 架飞机`;
    }

    function initStatsCharts() {
      // 制造商分布
      const makerCounts = {};
      aircraftData.forEach(aircraft => {
        makerCounts[aircraft.maker] = (makerCounts[aircraft.maker] || 0) + 1;
      });
      
      const makerChart = document.getElementById('makerChart');
      makerChart.innerHTML = Object.entries(makerCounts)
        .map(([maker, count]) => `
          <div class="chart-item">
            <span class="chart-label">${maker}</span>
            <span class="chart-bar" style="width: ${(count / aircraftData.length) * 100}%"></span>
            <span class="chart-value">${count}</span>
          </div>
        `)
        .join('');
      
      // 类型分布
      const typeCounts = {};
      aircraftData.forEach(aircraft => {
        typeCounts[aircraft.type] = (typeCounts[aircraft.type] || 0) + 1;
      });
      
      const typeChart = document.getElementById('typeChart');
      typeChart.innerHTML = Object.entries(typeCounts)
        .map(([type, count]) => `
          <div class="chart-item">
            <span class="chart-label">${type}</span>
            <span class="chart-bar" style="width: ${(count / aircraftData.length) * 100}%"></span>
            <span class="chart-value">${count}</span>
          </div>
        `)
        .join('');
      
      // 年代分布
      const eraCounts = {};
      aircraftData.forEach(aircraft => {
        eraCounts[aircraft.era] = (eraCounts[aircraft.era] || 0) + 1;
      });
      
      const eraChart = document.getElementById('eraChart');
      eraChart.innerHTML = Object.entries(eraCounts)
        .sort((a, b) => a[0].localeCompare(b[0]))
        .map(([era, count]) => `
          <div class="chart-item">
            <span class="chart-label">${era}</span>
            <span class="chart-bar" style="width: ${(count / aircraftData.length) * 100}%"></span>
            <span class="chart-value">${count}</span>
          </div>
        `)
        .join('');
    }

    // 用户系统功能
    function toggleUserMenu(e) {
      e.stopPropagation();
      userMenu.classList.toggle('active');
    }

    function closeUserMenu() {
      userMenu.classList.remove('active');
    }

    function switchAuthTab(tab) {
      authTabs.forEach(t => t.classList.remove('active'));
      document.querySelector(`[data-tab="${tab}"]`).classList.add('active');
      
      if (tab === 'login') {
        loginForm.style.display = 'flex';
        registerForm.style.display = 'none';
      } else {
        loginForm.style.display = 'none';
        registerForm.style.display = 'flex';
      }
      
      // 重置 Turnstile 当切换标签时
      setTimeout(resetTurnstile, 100);
    }

    async function handleLogin(e) {
      e.preventDefault();
      
      // 验证 Turnstile
      const turnstileResult = await verifyTurnstile();
      if (!turnstileResult.success) {
        showNotification(turnstileResult.message, 'error');
        return;
      }
      
      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPassword').value;
      
      // 简单的表单验证
      if (!email || !password) {
        showNotification('请填写所有必填字段', 'error');
        return;
      }
      
      // 模拟登录
      currentUser = {
        id: 1,
        name: '航空爱好者',
        email: email,
        avatar: 'U'
      };
      
      localStorage.setItem('currentUser', JSON.stringify(currentUser));
      updateUserInterface();
      authModal.classList.remove('active');
      showNotification('登录成功！', 'success');
      
      // 重置表单
      loginForm.reset();
      resetTurnstile();
    }

    async function handleRegister(e) {
      e.preventDefault();
      
      // 验证 Turnstile
      const turnstileResult = await verifyTurnstile();
      if (!turnstileResult.success) {
        showNotification(turnstileResult.message, 'error');
        return;
      }
      
      const name = document.getElementById('registerName').value;
      const email = document.getElementById('registerEmail').value;
      const password = document.getElementById('registerPassword').value;
      
      // 简单的表单验证
      if (!name || !email || !password) {
        showNotification('请填写所有必填字段', 'error');
        return;
      }
      
      if (password.length < 6) {
        showNotification('密码长度至少6位', 'error');
        return;
      }
      
      // 模拟注册
      currentUser = {
        id: Date.now(),
        name: name,
        email: email,
        avatar: name.charAt(0).toUpperCase()
      };
      
      localStorage.setItem('currentUser', JSON.stringify(currentUser));
      updateUserInterface();
      authModal.classList.remove('active');
      showNotification('注册成功！', 'success');
      
      // 重置表单
      registerForm.reset();
      resetTurnstile();
    }

    function handleLogout() {
      currentUser = null;
      localStorage.removeItem('currentUser');
      updateUserInterface();
      showNotification('已退出登录', 'info');
    }

    function updateUserInterface() {
      const loginBtn = document.getElementById('loginBtn');
      const favoritesBtn = document.getElementById('favoritesBtn');
      const exportBtn = document.getElementById('exportBtn');
      const logoutBtn = document.getElementById('logoutBtn');
      const userAvatar = document.querySelector('.user-avatar');
      
      if (currentUser) {
        loginBtn.style.display = 'none';
        favoritesBtn.style.display = 'flex';
        exportBtn.style.display = 'flex';
        logoutBtn.style.display = 'flex';
        userAvatar.textContent = currentUser.avatar;
      } else {
        loginBtn.style.display = 'flex';
        favoritesBtn.style.display = 'none';
        exportBtn.style.display = 'none';
        logoutBtn.style.display = 'none';
        favoritesSection.style.display = 'none';
        exportSection.style.display = 'none';
      }
    }

    function showFavorites() {
      favoritesSection.style.display = 'block';
      renderFavorites();
      favoritesSection.scrollIntoView({ behavior: 'smooth' });
    }

    function renderFavorites() {
      if (!currentUser) return;
      
      const userFavs = userFavorites[currentUser.id] || [];
      const favoriteAircraft = aircraftData.filter(aircraft => 
        userFavs.includes(aircraft.id)
      );
      
      if (favoriteAircraft.length === 0) {
        favoritesGrid.innerHTML = `
          <div class="favorites-empty">
            <i class="fas fa-heart"></i>
            <h3>暂无收藏的飞机</h3>
            <p>浏览飞机并点击心形图标添加到收藏夹</p>
          </div>
        `;
        return;
      }
      
      favoritesGrid.innerHTML = favoriteAircraft.map(aircraft => 
        createAircraftCard(aircraft).outerHTML
      ).join('');
    }

    function toggleFavorite(aircraftId) {
      if (!currentUser) {
        authModal.classList.add('active');
        return;
      }
      
      const userFavs = userFavorites[currentUser.id] || [];
      const index = userFavs.indexOf(aircraftId);
      
      if (index === -1) {
        userFavs.push(aircraftId);
        showNotification('已添加到收藏夹', 'success');
      } else {
        userFavs.splice(index, 1);
        showNotification('已从收藏夹移除', 'info');
      }
      
      userFavorites[currentUser.id] = userFavs;
      localStorage.setItem('userFavorites', JSON.stringify(userFavorites));
      
      renderAircraftGrid();
      if (favoritesSection.style.display === 'block') {
        renderFavorites();
      }
    }

    function showExport() {
      exportSection.style.display = 'block';
      exportSection.scrollIntoView({ behavior: 'smooth' });
    }

    function handleExport(format) {
      if (!currentUser) {
        authModal.classList.add('active');
        return;
      }
      
      let dataToExport = '';
      const userFavs = userFavorites[currentUser.id] || [];
      const favoriteAircraft = aircraftData.filter(aircraft => 
        userFavs.includes(aircraft.id)
      );
      
      switch (format) {
        case 'pdf':
          dataToExport = 'PDF导出功能准备中...';
          break;
        case 'excel':
          dataToExport = 'Excel导出功能准备中...';
          break;
        case 'json':
          dataToExport = JSON.stringify(favoriteAircraft, null, 2);
          break;
      }
      
      showNotification(`${format.toUpperCase()}导出功能已触发`, 'success');
      console.log('导出数据:', dataToExport);
    }

    function renderAirlinesGrid() {
      airlinesGrid.innerHTML = airlinesData.map(airline => `
        <div class="airline-card animate-fadeIn">
          <div class="airline-logo">${airline.code}</div>
          <div class="airline-info">
            <h4>${airline.name}</h4>
            <p><strong>国家:</strong> ${airline.country}</p>
            <p><strong>机队规模:</strong> ${airline.fleetSize} 架</p>
            <p><strong>主要机型:</strong> ${airline.mainAircraft.slice(0, 3).join(', ')}</p>
            <p><strong>成立时间:</strong> ${airline.founded}</p>
          </div>
        </div>
      `).join('');
    }

    function showNotification(message, type = 'info') {
      notification.textContent = message;
      notification.className = `notification show`;
      
      // 根据类型添加不同的样式
      if (type === 'error') {
        notification.style.borderLeftColor = '#e74c3c';
      } else if (type === 'success') {
        notification.style.borderLeftColor = '#2ecc71';
      } else {
        notification.style.borderLeftColor = 'var(--accent)';
      }
      
      setTimeout(() => {
        notification.classList.remove('show');
      }, 3000);
    }

    // 加载保存的用户数据
    const savedUser = localStorage.getItem('currentUser');
    if (savedUser) {
      currentUser = JSON.parse(savedUser);
      updateUserInterface();
    }

    // 加载保存的主题
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme) {
      document.documentElement.setAttribute('data-theme', savedTheme);
      const themeIcon = themeToggle.querySelector('.theme-icon');
      themeIcon.innerHTML = savedTheme === 'dark' ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
    }
  </script>
</body>
</html>
